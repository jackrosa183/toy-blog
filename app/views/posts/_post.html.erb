<main class="container ml-3">
  <div class="border-2 border-blue-500 border-opacity-75 md:border-opacity-50">
    <div class= "post p-2 ml-2">
      <div class="post__title">
        <h2 class="font-medium leading-tight text-4xl mt-0 mb-2 text-blue-600">
          <% if post.publish_date > Date.current %>
            <%= post.title + " (Unpublished) until " + post.publish_date.to_s %>
          <% else %>
            <%= post.title %>
          <% end %>
        </h2>
      </div>
      <div class="post__content">
        <%= tag.p post.content %>
      </div>  
      <div class="post_actions flex items-center">
        <% if (post.user == current_user) | current_user.admin %>
          <div class="p-2">
            <%= link_to "Edit", edit_post_path(post), class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full"%>
          </div>
          <div class="p-2">
            <%= button_to "Delete", post_path(post), method: :delete, class: "bg-red-500 hover:bg-red-700 text-white font-bold py-2 px-4 rounded-full" %>
          </div>
        <% else %>
        <% end %>
      </div>
    </div>
    
    <div class="comment_form ml-2">
      <%= form_with(model: Comment.new, url: post_comments_path(post), remote: true) do |f| %>
        <div class="field">
            <%= f.text_area :content, placeholder: "Comment..." %>
        </div>
        <span id="comment_button">
            <%= f.submit "Comment", class: "bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full" %>
        </span>
      <% end %>
    </div>
    
    <p class="post_details italic text-xs flex-right inset-y-0 ml-2 pt-10 pb-2">
      <%= "published " + post.publish_date.to_s %>
      <%= "by " + post.user.email.to_s%>
    </p>

    <h6 class="font-medium leading-tight text-base mt-0 mb-2 text-blue-600 ml-2">
      Comments
    </h6>

    <% if post.comments.size > 0 %>
      <%= render post.comments %>
    <% else %>
    <% end %>


    </div>
  </div>
</main>

