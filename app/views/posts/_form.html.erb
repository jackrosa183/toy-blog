<%= simple_form_for @post, data: {turbo_frame: "_top"} do |f| %>
  <%= f.input :title, required: true%>
  <%= f.input :content, required: true %>
  <div class="search" data-controller="search" data-search-url-value="<%= searches_url%>">
    <div name="added tags" data-search-target="tags">
      <% @staged_tags.each do |t| %>
        <%# <% current_tag = Tag.find_by(id: t)%> 
        <a class="btn-hover-delete" data-action="click->search#removeTag"><%= t.title%></a>
        <input type="hidden" name="post[extracted_tags][]" id="<%="hidden" + t.title%>" value="<%= t.title %>">
      <% end unless @staged_tags.nil?%>
    </div>

    <input class="bg-white border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-1/2 p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500 string optional" 
          data-action="keyup->search#fetchResults" 
          data-search-target="query" 
          autofocus="autofocus" 
          placeholder="Search Tags" 
          type="text">

    <div data-search-target="results"></div>
  </div>

  <% unless current_user.twitter_account.nil? or @post.published %>
    <%= f.input :should_tweet, required: false, label: 'AutoTweet?' %>
  <% end %>

  <%= f.input :publish_date, as: :date, required: true, html5: true, 
              input_html: { class: "w-96 p-2", min: Date.current } unless @post.published %>
  <%# <%= f.input :tag_ids, as: :select, collection: Tag.order(:title), label_method: :title %> 
  <div class="pt-4 pb-2">
      <%= f.button :submit %>
  </div>
  <div class="return_button pb-5 pt-2">
      <%= link_to "Cancel", posts_path, class: "btn-danger" %>
  </div>
<% end %>



<%# Link for result tags should link to adding ids to tag_ids params %>
<%# nested form for post is where tag search should be? %>

<%# <form action="<%= searches_path(turbo_frame: "search_results")" data-turbo-frame="search_results" class="peer" %> 
  <%# data-controller="form" data-action="invalid->form#hideValidationMessage:capture input->form#submit"> %>
  <%# <label for="search_query">Add Tags</label> %>
  <%# <input id="search_query" name="query" type="search" pattern=".*\w+.*" required autocomplete="off" %>
    <%# data-combobox-target="input" data-action="focus->combobox#start focusout->combobox#stop"> %>

  <%# <button data-form-target="submit"> %>
    <%# Search %>
  <%# </button> %>

  <%# <turbo-frame id="added_tags"></turbo-frame> %>
  <%# <turbo-frame id="search_results" target="_top" class="empty:hidden peer-invalid:hidden"></turbo-frame> %>
<%# </form> %>

<%# Text field 
Enter tags
Tag suggestions popup
When you press enter or space tag, gets added
Submit adds tags to post %>