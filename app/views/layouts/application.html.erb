<!DOCTYPE html>
  <html class= "bg-orange-100">
    <head>
    <%= javascript_include_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    </head>
    <body>
    <header data-controller="combobox">
      <% if user_signed_in?%>
        <form action="<%= searches_path(turbo_frame: "search_results") %>" data-turbo-frame="search_results" class="peer"
            data-controller="form" data-action="invalid->form#hideValidationMessage:capture input->form#submit">
          <label for="search_query">Search</label>
          <input id="search_query" name="query" type="search" pattern=".*\w+.*" required autocomplete="off"
            data-combobox-target="input" data-action="focus->combobox#start focusout->combobox#stop">

          <button data-form-target="submit">
            Search
          </button>

        </form>
      <% else %>
      <% end %>
      <%# <turbo-frame id="search_results" target="_top" class="empty:hidden peer-invalid:hidden"></turbo-frame> %>
      <script>
        window.fbAsyncInit = function() {
          FB.init({
            appId      : 474834274659554,
            cookie     : true,
            xfbml      : true,
            version    : '{api-version}'
          });
            
          FB.AppEvents.logPageView();   
            
        };

        (function(d, s, id){
          var js, fjs = d.getElementsByTagName(s)[0];
          if (d.getElementById(id)) {return;}
          js = d.createElement(s); js.id = id;
          js.src = "https://connect.facebook.net/en_US/sdk.js";
          fjs.parentNode.insertBefore(js, fjs);
        }(document, 'script', 'facebook-jssdk'));
      </script>
      
      <fb:login-button 
        scope="public_profile,email"
        onlogin="checkLoginState();">
      </fb:login-button>

    </header>

    <%= render "layouts/navbar" %>
    <div class="row">
      <div class="col-xs-10 col-xs-offset-1">
        <% flash.each do |type, msg| %>
          <% if type == "notice" %>
            <div class="p-4 mb-4 text-sm text-green-700 bg-green-100 rounded-lg dark:bg-green-200 dark:text-green-800" role="alert">
              <span class="font-medium">Success!</span> <%= msg %>
            </div>
          <% elsif type == "alert" %>
            <div class="p-4 mb-4 text-sm text-yellow-700 bg-yellow-100 rounded-lg dark:bg-yellow-200 dark:text-yellow-800" role="alert">
              <span class="font-medium">Warning!</span> <%= msg %>
            </div>
          <% else %>
            <div class='alert alert-<%= "#{type}" %>'>
            <div class="p-4 text-sm text-gray-700 bg-gray-100 rounded-lg dark:bg-gray-700 dark:text-gray-300" role="alert">
               <span class="font-medium">Alert!</span>  <%= msg %>
            </div>
          <% end %>
        <% end %>
      </div>
    </div>
      <%= yield %>
    </body>
  </html>
